/*! For license information please see 293.77fff6a7.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkinkwell_frontend=self.webpackChunkinkwell_frontend||[]).push([[293],{1293:(e,s,a)=>{a.r(s),a.d(s,{default:()=>N});var t=a(8),r=a(5043),l=a(2339),c=a(4459),n=a(1680),o=a(2574),d=a(4918),i=a(3528),h=a(4265),m=a(1639);const x=(0,m.A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var p=a(614);const b=(0,m.A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=a(9855),y=a(7365),j=a(579);const g="http://localhost:7777/api/admin",k=[{key:"users",label:"Users",icon:(0,j.jsx)(c.A,{className:"inline h-5 w-5 mr-1"})},{key:"posts",label:"Posts",icon:(0,j.jsx)(n.A,{className:"inline h-5 w-5 mr-1"})},{key:"comments",label:"Comments",icon:(0,j.jsx)(o.A,{className:"inline h-5 w-5 mr-1"})},{key:"likes",label:"Likes",icon:(0,j.jsx)(d.A,{className:"inline h-5 w-5 mr-1 text-red-500"})},{key:"bookmarks",label:"Bookmarks",icon:(0,j.jsx)(i.A,{className:"inline h-5 w-5 mr-1 text-indigo-500"})}];const N=function(){const[e,s]=(0,r.useState)("users"),[a,c]=(0,r.useState)([]),[n,o]=(0,r.useState)([]),[d,i]=(0,r.useState)([]),[m,N]=(0,r.useState)(!1),[w,f]=(0,r.useState)(""),[v,A]=(0,r.useState)(null),[C,E]=(0,r.useState)({}),[_,T]=(0,r.useState)(null),[D,S]=(0,r.useState)([]),[F,z]=(0,r.useState)([]),M=localStorage.getItem("token"),I=async()=>{f(""),N(!0);try{const s=localStorage.getItem("token"),a={credentials:"include",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}};if(["users","posts","comments"].includes(e)){const e={users:"".concat(g,"/users"),posts:"".concat(g,"/posts"),comments:"".concat(g,"/comments")},[s,t,r]=await Promise.all([fetch(e.users,a),fetch(e.posts,a),fetch(e.comments,a)]);if(!s.ok)throw new Error("Failed to fetch users: ".concat(s.status," ").concat(s.statusText));if(!t.ok)throw new Error("Failed to fetch posts: ".concat(t.status," ").concat(t.statusText));if(!r.ok)throw new Error("Failed to fetch comments: ".concat(r.status," ").concat(r.statusText));const l=await s.json(),n=await t.json(),d=await r.json();c(l.users||[]),o(n.posts||[]),i(d.comments||[])}else if("likes"===e){const[e,s]=await Promise.all([fetch("".concat(g,"/posts"),a),fetch("".concat(g,"/comments"),a)]);if(!e.ok)throw new Error("Failed to fetch posts for likes: ".concat(e.status," ").concat(e.statusText));if(!s.ok)throw new Error("Failed to fetch comments for likes: ".concat(s.status," ").concat(s.statusText));const t=await e.json(),r=await s.json();let l=[];(t.posts||[]).forEach(e=>{(e.likes||[]).forEach(s=>{l.push({_id:"".concat(e._id,"-").concat(s),type:"post",user:s,post:e})})}),(r.comments||[]).forEach(e=>{(e.likes||[]).forEach(s=>{l.push({_id:"".concat(e._id,"-").concat(s),type:"comment",user:s,comment:e})})}),S(l)}else if("bookmarks"===e){const e=await fetch("".concat(g,"/users"),a);if(!e.ok)throw new Error("Failed to fetch users for bookmarks: ".concat(e.status," ").concat(e.statusText));const s=await e.json();let t=[];(s.users||[]).forEach(e=>{(e.bookmarks||[]).forEach(s=>{t.push({_id:"".concat(e._id,"-").concat(s),user:e,postId:s})})}),z(t)}N(!1)}catch(s){f(s.message||"Failed to fetch data"),N(!1),console.error("AdminDashboard fetch error:",s)}};(0,r.useEffect)(()=>{I(),A(null),E({})},[e]);const L=e=>{A(e._id),E(e),T({type:"edit",id:e._id,data:e})},B=()=>{A(null),E({}),T(null)},P=async(e,s)=>{T({type:"delete",id:s})},U=e=>{E((0,t.A)((0,t.A)({},C),{},{[e.target.name]:e.target.value}))};return(0,j.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,j.jsxs)("h1",{className:"text-3xl font-bold mb-6 flex items-center",children:[(0,j.jsx)(y.A,{className:"h-7 w-7 mr-2 text-indigo-600"}),"Admin Dashboard"]}),(0,j.jsx)("div",{className:"flex gap-2 mb-8 border-b pb-2",children:k.map(a=>(0,j.jsxs)("button",{onClick:()=>s(a.key),className:"flex items-center px-4 py-2 rounded-t-lg border-b-2 transition-all ".concat(e===a.key?"border-indigo-600 bg-indigo-50 dark:bg-gray-900 font-bold":"border-transparent bg-gray-100 dark:bg-gray-800"),title:a.label,children:[a.icon,a.label]},a.key))}),m&&(0,j.jsx)("div",{children:"Loading..."}),w&&(0,j.jsxs)("div",{className:"bg-red-100 text-red-700 p-4 rounded mb-4",children:[(0,j.jsx)("strong",{children:"Error:"})," ",w]}),"users"===e&&(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"min-w-full border rounded-lg shadow-sm bg-white dark:bg-gray-900",children:[(0,j.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"border px-2 py-2",children:"ID"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Username"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Email"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Role"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Actions"})]})}),(0,j.jsx)("tbody",{children:a.map(e=>(0,j.jsxs)("tr",{className:"hover:bg-indigo-50 dark:hover:bg-gray-800",children:[(0,j.jsx)("td",{className:"border px-2 py-1 text-xs",children:e._id}),(0,j.jsx)("td",{className:"border px-2 py-1",children:e.username}),(0,j.jsx)("td",{className:"border px-2 py-1",children:e.email}),(0,j.jsx)("td",{className:"border px-2 py-1 capitalize",children:e.role}),(0,j.jsxs)("td",{className:"border px-2 py-1",children:[(0,j.jsx)("button",{className:"text-blue-600 hover:underline mr-2",title:"Edit",onClick:()=>L(e),children:(0,j.jsx)(h.A,{className:"h-4 w-4 inline"})}),(0,j.jsx)("button",{className:"text-red-600 hover:underline",title:"Delete",onClick:()=>P(0,e._id),children:(0,j.jsx)(u.A,{className:"h-4 w-4 inline"})})]})]},e._id))})]})}),"posts"===e&&(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"min-w-full border rounded-lg shadow-sm bg-white dark:bg-gray-900",children:[(0,j.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"border px-2 py-2",children:"ID"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Title"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Author"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Actions"})]})}),(0,j.jsx)("tbody",{children:n.map(e=>{var s;return(0,j.jsxs)("tr",{className:"hover:bg-indigo-50 dark:hover:bg-gray-800",children:[(0,j.jsx)("td",{className:"border px-2 py-1 text-xs",children:e._id}),(0,j.jsx)("td",{className:"border px-2 py-1",children:e.title}),(0,j.jsx)("td",{className:"border px-2 py-1",children:(null===(s=e.author)||void 0===s?void 0:s.username)||"-"}),(0,j.jsxs)("td",{className:"border px-2 py-1",children:[(0,j.jsx)("button",{className:"text-blue-600 hover:underline mr-2",title:"Edit",onClick:()=>L(e),children:(0,j.jsx)(h.A,{className:"h-4 w-4 inline"})}),(0,j.jsx)("button",{className:"text-red-600 hover:underline",title:"Delete",onClick:()=>P(0,e._id),children:(0,j.jsx)(u.A,{className:"h-4 w-4 inline"})})]})]},e._id)})})]})}),"comments"===e&&(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"min-w-full border rounded-lg shadow-sm bg-white dark:bg-gray-900",children:[(0,j.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"border px-2 py-2",children:"ID"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Content"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Author"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Post"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Actions"})]})}),(0,j.jsx)("tbody",{children:d.map(e=>{var s,a;return(0,j.jsxs)("tr",{className:"hover:bg-indigo-50 dark:hover:bg-gray-800",children:[(0,j.jsx)("td",{className:"border px-2 py-1 text-xs",children:e._id}),(0,j.jsx)("td",{className:"border px-2 py-1",children:e.content}),(0,j.jsx)("td",{className:"border px-2 py-1",children:(null===(s=e.author)||void 0===s?void 0:s.username)||"-"}),(0,j.jsx)("td",{className:"border px-2 py-1",children:(null===(a=e.post)||void 0===a?void 0:a.title)||"-"}),(0,j.jsxs)("td",{className:"border px-2 py-1",children:[(0,j.jsx)("button",{className:"text-blue-600 hover:underline mr-2",title:"Edit",onClick:()=>L(e),children:(0,j.jsx)(h.A,{className:"h-4 w-4 inline"})}),(0,j.jsx)("button",{className:"text-red-600 hover:underline",title:"Delete",onClick:()=>P(0,e._id),children:(0,j.jsx)(u.A,{className:"h-4 w-4 inline"})})]})]},e._id)})})]})}),"likes"===e&&(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"min-w-full border rounded-lg shadow-sm bg-white dark:bg-gray-900",children:[(0,j.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"border px-2 py-2",children:"Type"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"User ID"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Post/Comment"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Actions"})]})}),(0,j.jsx)("tbody",{children:D.map(e=>(0,j.jsxs)("tr",{className:"hover:bg-indigo-50 dark:hover:bg-gray-800",children:[(0,j.jsx)("td",{className:"border px-2 py-1 capitalize",children:e.type}),(0,j.jsx)("td",{className:"border px-2 py-1",children:e.user}),(0,j.jsx)("td",{className:"border px-2 py-1",children:"post"===e.type?e.post.title:e.comment.content}),(0,j.jsx)("td",{className:"border px-2 py-1",children:(0,j.jsx)("button",{className:"text-red-600 hover:underline",title:"Remove Like",onClick:()=>(async e=>{let s="";"post"===e.type&&(s="".concat(g,"/posts/").concat(e.post._id,"/like/").concat(e.user)),"comment"===e.type&&(s="".concat(g,"/comments/").concat(e.comment._id,"/like/").concat(e.user));try{if(!(await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(M),"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error;l.Ay.success("Like removed"),I()}catch(a){l.Ay.error("Failed to remove like")}})(e),children:(0,j.jsx)(u.A,{className:"h-4 w-4 inline"})})})]},e._id))})]})}),"bookmarks"===e&&(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"min-w-full border rounded-lg shadow-sm bg-white dark:bg-gray-900",children:[(0,j.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"border px-2 py-2",children:"User"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Post ID"}),(0,j.jsx)("th",{className:"border px-2 py-2",children:"Actions"})]})}),(0,j.jsx)("tbody",{children:F.map(e=>(0,j.jsxs)("tr",{className:"hover:bg-indigo-50 dark:hover:bg-gray-800",children:[(0,j.jsx)("td",{className:"border px-2 py-1",children:e.user.username}),(0,j.jsx)("td",{className:"border px-2 py-1",children:e.postId}),(0,j.jsx)("td",{className:"border px-2 py-1",children:(0,j.jsx)("button",{className:"text-red-600 hover:underline",title:"Remove Bookmark",onClick:()=>(async e=>{let s="".concat(g,"/users/").concat(e.user._id,"/bookmark/").concat(e.postId);try{if(!(await fetch(s,{method:"DELETE",headers:{Authorization:"Bearer ".concat(M),"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error;l.Ay.success("Bookmark removed"),I()}catch(a){l.Ay.error("Failed to remove bookmark")}})(e),children:(0,j.jsx)(u.A,{className:"h-4 w-4 inline"})})})]},e._id))})]})}),_?"edit"===_.type?(0,j.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,j.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md shadow-lg",children:[(0,j.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[(0,j.jsx)(h.A,{className:"h-5 w-5 mr-2"}),"Edit ",e.slice(0,-1)]}),"users"===e&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("label",{className:"block mb-2",children:"Username"}),(0,j.jsx)("input",{name:"username",value:C.username||"",onChange:U,className:"w-full border px-2 py-1 rounded mb-3 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),(0,j.jsx)("label",{className:"block mb-2",children:"Email"}),(0,j.jsx)("input",{name:"email",value:C.email||"",onChange:U,className:"w-full border px-2 py-1 rounded mb-3 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"}),(0,j.jsx)("label",{className:"block mb-2",children:"Role"}),(0,j.jsxs)("select",{name:"role",value:C.role||"reader",onChange:U,className:"w-full border px-2 py-1 rounded mb-3 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:[(0,j.jsx)("option",{value:"admin",children:"admin"}),(0,j.jsx)("option",{value:"author",children:"author"}),(0,j.jsx)("option",{value:"reader",children:"reader"})]})]}),"posts"===e&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("label",{className:"block mb-2",children:"Title"}),(0,j.jsx)("input",{name:"title",value:C.title||"",onChange:U,className:"w-full border px-2 py-1 rounded mb-3 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),"comments"===e&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("label",{className:"block mb-2",children:"Content"}),(0,j.jsx)("input",{name:"content",value:C.content||"",onChange:U,className:"w-full border px-2 py-1 rounded mb-3 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100"})]}),(0,j.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,j.jsxs)("button",{className:"px-4 py-2 bg-green-600 text-white rounded flex items-center",onClick:()=>(async e=>{let s="";"users"===e&&(s="".concat(g,"/users/").concat(v)),"posts"===e&&(s="".concat(g,"/posts/").concat(v)),"comments"===e&&(s="".concat(g,"/comments/").concat(v));try{if(!(await fetch(s,{method:"PUT",headers:{Authorization:"Bearer ".concat(M),"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(C)})).ok)throw new Error("Failed to update");l.Ay.success("Updated successfully"),I(),A(null),E({}),T(null)}catch(a){l.Ay.error("Update failed")}})(e),children:[(0,j.jsx)(x,{className:"h-4 w-4 mr-1"}),"Save"]}),(0,j.jsxs)("button",{className:"px-4 py-2 bg-gray-400 text-white rounded flex items-center",onClick:B,children:[(0,j.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]})}):"delete"===_.type?(0,j.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,j.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md shadow-lg",children:[(0,j.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center text-red-600",children:[(0,j.jsx)(b,{className:"h-5 w-5 mr-2"}),"Confirm Delete"]}),(0,j.jsxs)("p",{className:"mb-4",children:["Are you sure you want to delete this ",e.slice(0,-1),"?"]}),(0,j.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,j.jsxs)("button",{className:"px-4 py-2 bg-red-600 text-white rounded flex items-center",onClick:()=>(async(e,s)=>{let a="";"users"===e&&(a="".concat(g,"/users/").concat(s)),"posts"===e&&(a="".concat(g,"/posts/").concat(s)),"comments"===e&&(a="".concat(g,"/comments/").concat(s));try{if(!(await fetch(a,{method:"DELETE",headers:{Authorization:"Bearer ".concat(M),"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Failed to delete");l.Ay.success("Deleted successfully"),I(),T(null)}catch(t){l.Ay.error("Delete failed")}})(e,_.id),children:[(0,j.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"Delete"]}),(0,j.jsxs)("button",{className:"px-4 py-2 bg-gray-400 text-white rounded flex items-center",onClick:B,children:[(0,j.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]})}):null:null]})}},1680:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},2574:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},4265:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},4918:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9855:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=293.77fff6a7.chunk.js.map