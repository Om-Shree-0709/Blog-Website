/*! For license information please see 68.bff399a9.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkinkwell_frontend=self.webpackChunkinkwell_frontend||[]).push([[68],{5087:(e,t,a)=>{a.d(t,{A:()=>s});const s=(0,a(1639).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8789:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(5043),r=a(5475),l=a(2811),c=a(4918),n=a(2574),i=a(5087),o=a(3528),d=a(5016),x=a(6536),m=a(2339),h=a(579);const u=e=>{var t,a,u,p,y,g,v;let{post:j,featured:f=!1}=e;const{user:N,isAuthenticated:k}=(0,d.A)(),[b,w]=(0,s.useState)(j.likeCount||0),[A,C]=(0,s.useState)(N&&(null===(t=j.likes)||void 0===t?void 0:t.includes(N._id))),[S,q]=(0,s.useState)(N&&(null===(a=N.bookmarks)||void 0===a?void 0:a.includes(j._id)));return(0,h.jsxs)("article",{className:"card overflow-hidden transition-transform hover:scale-[1.02] ".concat(f?"ring-2 ring-primary-200 dark:ring-primary-800":""),children:[j.featuredImage&&(0,h.jsx)("div",{className:"aspect-video overflow-hidden",children:(0,h.jsx)("img",{src:j.featuredImage,alt:j.title,loading:"lazy",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),(0,h.jsxs)("div",{className:"p-6",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,h.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium text-primary-600 bg-primary-100 dark:bg-primary-900/30 dark:text-primary-400 rounded-full",children:j.category}),f&&(0,h.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium text-amber-600 bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:"Featured"})]}),(0,h.jsx)(r.N_,{to:"/post/".concat(j.slug),children:(0,h.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ".concat(f?"text-xl":"text-lg"),children:j.title})}),j.excerpt&&(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3",children:j.excerpt}),(0,h.jsxs)("div",{className:"flex items-center mb-4",children:[null!==(u=j.author)&&void 0!==u&&u.avatar?(0,h.jsx)("img",{src:j.author.avatar,alt:j.author.username,loading:"lazy",className:"w-8 h-8 rounded-full mr-3"}):(0,h.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center mr-3",children:(0,h.jsx)("span",{className:"text-white font-medium text-sm",children:null===(p=j.author)||void 0===p||null===(y=p.username)||void 0===y?void 0:y.charAt(0).toUpperCase()})}),(0,h.jsxs)("div",{children:[(0,h.jsx)(r.N_,{to:"/profile/".concat(null===(g=j.author)||void 0===g?void 0:g.username),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-primary-600 dark:hover:text-primary-400",children:null===(v=j.author)||void 0===v?void 0:v.username}),(0,h.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,h.jsx)("span",{children:(0,l.A)(new Date(j.createdAt),{addSuffix:!0})}),(0,h.jsx)("span",{className:"mx-1",children:"\u2022"}),(0,h.jsxs)("span",{children:[j.readTime||5," min read"]})]})]})]}),j.tags&&j.tags.length>0&&(0,h.jsxs)("div",{className:"flex flex-wrap gap-1 mb-4",children:[j.tags.slice(0,3).map(e=>(0,h.jsxs)(r.N_,{to:"/search?tag=".concat(e),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400",children:["#",e]},e)),j.tags.length>3&&(0,h.jsxs)("span",{className:"text-xs text-gray-400",children:["+",j.tags.length-3," more"]})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,h.jsx)("button",{onClick:async e=>{if(e.preventDefault(),k){C(e=>!e),w(e=>A?e-1:e+1);try{await x.Ay.post("/api/posts/".concat(j._id,"/like"))}catch(t){C(e=>!e),w(e=>A?e+1:e-1),m.Ay.error("Failed to like post")}}else m.Ay.error("Please login to like posts")},className:"focus:outline-none",children:(0,h.jsx)(c.A,{className:"h-4 w-4 ".concat(A?"text-red-500 fill-current":"")})}),(0,h.jsx)("span",{children:b})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,h.jsx)(n.A,{className:"h-4 w-4"}),(0,h.jsx)("span",{children:j.commentCount||0})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,h.jsx)(i.A,{className:"h-4 w-4"}),(0,h.jsx)("span",{children:j.viewCount||0})]})]}),k&&(0,h.jsx)("button",{onClick:async e=>{if(e.preventDefault(),k){q(e=>!e);try{await x.Ay.post("/api/posts/".concat(j._id,"/bookmark"))}catch(t){q(e=>!e),m.Ay.error("Failed to update bookmark")}}else m.Ay.error("Please login to bookmark posts")},className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ".concat(S?"text-primary-600":"text-gray-400"),title:S?"Remove from bookmarks":"Add to bookmarks",children:(0,h.jsx)(o.A,{className:"h-4 w-4 ".concat(S?"fill-current":"")})})]})]})]})}},9068:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(8),r=a(5043),l=a(5475),c=a(9490),n=a(9292);const i=(0,a(1639).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var o=a(614),d=a(8789),x=a(9643),m=a(6536),h=a(579);const u=()=>{const[e,t]=(0,l.ok)(),[a,u]=(0,r.useState)([]),[p,y]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[j,f]=(0,r.useState)({query:e.get("query")||"",category:e.get("category")||"",sort:e.get("sort")||"relevance"}),N=(0,r.useRef)();(0,r.useEffect)(()=>{if(j.query||j.category)return y(!0),v(null),N.current&&clearTimeout(N.current),N.current=setTimeout(async()=>{try{const e=new URLSearchParams;j.query&&e.append("query",j.query),j.category&&e.append("category",j.category),j.sort&&e.append("sort",j.sort);const t=await m.Ay.get("/api/search/posts",{params:e});u(t.data.posts)}catch(e){v("Failed to fetch search results"),console.error("Search error:",e)}finally{y(!1)}},1e3),()=>clearTimeout(N.current);u([])},[j]);const k=()=>{f({query:"",category:"",sort:"relevance"}),t({})},b=j.query||j.category||"relevance"!==j.sort;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(c.mg,{children:[(0,h.jsx)("title",{children:"Search - InkWell"}),(0,h.jsx)("meta",{name:"description",content:"Search for posts, authors, and topics on InkWell"})]}),(0,h.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,h.jsxs)("div",{className:"mb-8",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:"Search"}),(0,h.jsx)("div",{className:"mb-6",children:(0,h.jsx)("div",{className:"flex flex-col md:flex-row gap-4",children:(0,h.jsxs)("div",{className:"flex-1 relative",children:[(0,h.jsx)(n.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,h.jsx)("input",{type:"text",value:j.query,onChange:e=>{const a=(0,s.A)((0,s.A)({},j),{},{query:e.target.value});f(a);const r=new URLSearchParams;a.query&&r.set("query",a.query),a.category&&r.set("category",a.category),"relevance"!==a.sort&&r.set("sort",a.sort),t(r)},placeholder:"Search posts, authors, or tags...",className:"input pl-10"})]})})}),(0,h.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)(i,{className:"h-4 w-4 text-gray-500"}),(0,h.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),(0,h.jsxs)("select",{value:j.category,onChange:e=>f((0,s.A)((0,s.A)({},j),{},{category:e.target.value})),className:"input text-sm py-1 px-3",children:[(0,h.jsx)("option",{value:"",children:"All Categories"}),["Technology","Design","Business","Lifestyle","Travel","Food","Health","Education","Entertainment","Other"].map(e=>(0,h.jsx)("option",{value:e,children:e},e))]}),(0,h.jsx)("select",{value:j.sort,onChange:e=>f((0,s.A)((0,s.A)({},j),{},{sort:e.target.value})),className:"input text-sm py-1 px-3",children:[{value:"relevance",label:"Most Relevant"},{value:"latest",label:"Latest"},{value:"popular",label:"Most Popular"},{value:"oldest",label:"Oldest"}].map(e=>(0,h.jsx)("option",{value:e.value,children:e.label},e.value))}),b&&(0,h.jsxs)("button",{onClick:k,className:"inline-flex items-center space-x-1 text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:[(0,h.jsx)(o.A,{className:"h-4 w-4"}),(0,h.jsx)("span",{children:"Clear filters"})]})]})]}),(0,h.jsx)("div",{children:p?(0,h.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,h.jsx)(x.A,{size:"xl"})}):g?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:g}),(0,h.jsx)("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Try Again"})]}):a.length>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[a.length," ",1===a.length?"result":"results"," ","found"]}),j.query&&(0,h.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:['for "',j.query,'"']})]}),(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,h.jsx)(d.A,{post:e},e._id))})]}):b?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No results found"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Try adjusting your search terms or filters"}),(0,h.jsx)("button",{onClick:k,className:"btn-outline",children:"Clear filters"})]}):(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Start searching"}),(0,h.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a search term to find posts, authors, or topics"})]})})]})]})}}}]);
//# sourceMappingURL=68.bff399a9.chunk.js.map