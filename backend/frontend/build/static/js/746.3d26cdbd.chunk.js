/*! For license information please see 746.3d26cdbd.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkinkwell_frontend=self.webpackChunkinkwell_frontend||[]).push([[746],{9746:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(5043),r=a(3216),l=a(5475),c=a(9490),n=a(2811),i=a(9156),o=a(8646),d=a(1639);const m=(0,d.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var x=a(4918),h=a(3528);const y=(0,d.A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var u=a(5016),p=a(9643),g=a(2339),f=a(6536),j=a(579);const v=()=>{var e,t,a,d,v;const{slug:k}=(0,r.g)(),{user:b,isAuthenticated:N}=(0,u.A)(),[w,A]=(0,s.useState)(null),[C,S]=(0,s.useState)([]),[_,P]=(0,s.useState)(!0),[I,E]=(0,s.useState)(null),[F,z]=(0,s.useState)(""),[D,T]=(0,s.useState)(!1),[q,B]=(0,s.useState)(!1),[U,G]=(0,s.useState)(!1),[H,L]=(0,s.useState)(0),W=(0,s.useCallback)(async()=>{if(w)try{const e=await f.A.get("/api/posts/".concat(w._id,"/comments"));S(Array.isArray(e.data.comments)?e.data.comments:[])}catch(e){console.error("Error fetching comments:",e),S([])}},[w]);(0,s.useEffect)(()=>{(async()=>{try{P(!0);const e=await f.A.get("/api/posts/".concat(k));A(e.data.post)}catch(I){console.error("Error fetching post:",I),E("Post not found")}finally{P(!1)}})()},[k]),(0,s.useEffect)(()=>{w&&W()},[w,W]),(0,s.useEffect)(()=>{var e,t;w&&b&&(B(null===(e=w.likes)||void 0===e?void 0:e.includes(b._id)),G(null===(t=b.bookmarks)||void 0===t?void 0:t.includes(w._id)),L(w.likeCount||0))},[w,b]);return _?(0,j.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,j.jsx)(p.A,{size:"xl"})}):I||!w?(0,j.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Post not found"}),(0,j.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The post you're looking for doesn't exist or has been removed."}),(0,j.jsx)(l.N_,{to:"/",className:"btn-primary",children:"Go Home"})]})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(c.mg,{children:[(0,j.jsxs)("title",{children:[w.title," - InkWell"]}),(0,j.jsx)("meta",{name:"description",content:w.excerpt}),(0,j.jsx)("meta",{property:"og:title",content:w.title}),(0,j.jsx)("meta",{property:"og:description",content:w.excerpt}),w.featuredImage&&(0,j.jsx)("meta",{property:"og:image",content:w.featuredImage})]}),(0,j.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,j.jsxs)("article",{className:"mb-8",children:[w.featuredImage&&(0,j.jsx)("div",{className:"mb-8",children:(0,j.jsx)("img",{src:w.featuredImage,alt:w.title,className:"w-full h-64 md:h-96 object-cover rounded-lg",loading:"lazy"})}),(0,j.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-4",children:w.title}),(0,j.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,j.jsx)("div",{className:"flex items-center space-x-4",children:(0,j.jsxs)(l.N_,{to:"/profile/".concat(null===(e=w.author)||void 0===e?void 0:e.username),className:"flex items-center space-x-2 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:[null!==(t=w.author)&&void 0!==t&&t.avatar?(0,j.jsx)("img",{src:w.author.avatar,alt:w.author.username,className:"w-10 h-10 rounded-full"}):(0,j.jsx)("div",{className:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center",children:(0,j.jsx)("span",{className:"text-white font-medium",children:null===(a=w.author)||void 0===a||null===(d=a.username)||void 0===d?void 0:d.charAt(0).toUpperCase()})}),(0,j.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:null===(v=w.author)||void 0===v?void 0:v.username})]})}),(0,j.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,j.jsx)(o.A,{className:"h-4 w-4"}),(0,j.jsx)("span",{children:(0,n.A)(new Date(w.createdAt),{addSuffix:!0})})]}),(0,j.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,j.jsx)(m,{className:"h-4 w-4"}),(0,j.jsxs)("span",{children:[w.readTime||5," min read"]})]})]})]}),(0,j.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,j.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-medium text-primary-600 bg-primary-100 dark:bg-primary-900/30 dark:text-primary-400 rounded-full",children:w.category}),w.tags&&w.tags.length>0&&(0,j.jsx)("div",{className:"flex items-center space-x-2",children:w.tags.map(e=>(0,j.jsxs)(l.N_,{to:"/search?tag=".concat(e),className:"text-sm text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400",children:["#",e]},e))})]}),(0,j.jsxs)("div",{className:"flex items-center justify-between mb-8 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,j.jsxs)("button",{onClick:async()=>{if(N){B(e=>!e),L(e=>q?e-1:e+1);try{await f.A.post("/api/posts/".concat(w._id,"/like"))}catch(e){B(e=>!e),L(e=>q?e+1:e-1),g.Ay.error("Failed to like post")}}else g.Ay.error("Please login to like posts")},className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(q?"text-red-600 bg-red-100 dark:bg-red-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,j.jsx)(x.A,{className:"h-5 w-5 ".concat(q?"fill-current":"")}),(0,j.jsx)("span",{children:H})]}),N&&(0,j.jsxs)("button",{onClick:async()=>{if(N){G(e=>!e);try{await f.A.post("/api/posts/".concat(w._id,"/bookmark"))}catch(e){G(e=>!e),g.Ay.error("Failed to update bookmark")}}else g.Ay.error("Please login to bookmark posts")},className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ".concat(U?"text-primary-600 bg-primary-100 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[(0,j.jsx)(h.A,{className:"h-5 w-5 ".concat(U?"fill-current":"")}),(0,j.jsx)("span",{children:"Bookmark"})]}),(0,j.jsxs)("button",{onClick:()=>{navigator.share?navigator.share({title:w.title,text:w.excerpt,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),g.Ay.success("Link copied to clipboard"))},className:"flex items-center space-x-2 px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:[(0,j.jsx)(y,{className:"h-5 w-5"}),(0,j.jsx)("span",{children:"Share"})]})]}),(0,j.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[w.viewCount||0," views"]})]})]}),(0,j.jsx)("div",{className:"prose prose-lg max-w-none dark:prose-invert mb-12",children:(0,j.jsx)(i.oz,{children:w.content})}),(0,j.jsxs)("section",{className:"mt-12",children:[(0,j.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Comments"}),w.isPublished?(0,j.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),F.trim()){T(!0);try{await f.A.post("/comments",{content:F,postId:w._id}),z(""),W(),g.Ay.success("Comment added successfully")}catch(t){g.Ay.error("Failed to add comment")}finally{T(!1)}}},className:"mb-8",children:[(0,j.jsx)("textarea",{value:F,onChange:e=>z(e.target.value),placeholder:"Add a comment...",rows:3,className:"w-full p-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),(0,j.jsx)("div",{className:"mt-2 flex justify-end",children:(0,j.jsx)("button",{type:"submit",disabled:D||!F.trim(),className:"btn-primary",children:D?"Posting...":"Post Comment"})})]}):(0,j.jsx)("div",{className:"mb-8 text-yellow-600 dark:text-yellow-400",children:"Comments are only available on published posts."}),(0,j.jsx)("div",{className:"space-y-6",children:Array.isArray(C)&&C.map(e=>{var t,a,s,r;return(0,j.jsx)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4",children:(0,j.jsxs)("div",{className:"flex items-start space-x-3",children:[null!==(t=e.author)&&void 0!==t&&t.avatar?(0,j.jsx)("img",{src:e.author.avatar,alt:e.author.username,className:"w-8 h-8 rounded-full"}):(0,j.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center",children:(0,j.jsx)("span",{className:"text-white text-sm font-medium",children:null===(a=e.author)||void 0===a||null===(s=a.username)||void 0===s?void 0:s.charAt(0).toUpperCase()})}),(0,j.jsxs)("div",{className:"flex-1",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,j.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:null===(r=e.author)||void 0===r?void 0:r.username}),(0,j.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,n.A)(new Date(e.createdAt),{addSuffix:!0})})]}),(0,j.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.content})]})]})},e._id)})}),0===C.length&&(0,j.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"No comments yet. Be the first to comment!"})]})]})]})}}}]);
//# sourceMappingURL=746.3d26cdbd.chunk.js.map