/*! For license information please see 343.129a5b46.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkinkwell_frontend=self.webpackChunkinkwell_frontend||[]).push([[343],{797:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},5884:()=>{},8343:(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var a=s(8),r=s(5043),l=s(3216),o=s(4858),n=s(9156),i=s(9490),d=s(5087),c=s(797),m=s(614),x=s(1360),h=s(8693),u=s(8646),p=s(2339),g=s(6536),y=s(9643),b=(s(5884),s(579));const j=()=>{const[e,t]=(0,r.useState)(""),[s,j]=(0,r.useState)([]),[f,k]=(0,r.useState)(""),[v,N]=(0,r.useState)(""),[w,A]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[E,P]=(0,r.useState)(!1),F=(0,l.Zp)(),{register:L,handleSubmit:I,formState:{errors:z},watch:T}=(0,o.mN)(),q=T("title"),D=()=>{f.trim()&&!s.includes(f.trim().toLowerCase())&&(j([...s,f.trim().toLowerCase()]),k(""))},R=async function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.trim()){S(!0);try{const r={title:t.title,content:e,excerpt:t.excerpt||"",category:t.category,tags:s,featuredImage:v,isPublished:a},l=await g.Ay.post("/api/posts",r);if(!l.data||!l.data.post)throw new Error("Invalid response from server");p.Ay.success(a?"Post published successfully!":"Post saved as draft!"),F("/post/".concat(l.data.post.slug))}catch(i){var r,l,o,n;let e="Failed to create post";if(null!==(r=i.response)&&void 0!==r&&null!==(l=r.data)&&void 0!==l&&l.errors&&Array.isArray(i.response.data.errors))e=i.response.data.errors.map(e=>e.message).join("\n");else if(null!==(o=i.response)&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&n.message)e=i.response.data.message.includes("title already exists")?"A post with this title already exists. Please choose a different title.":i.response.data.message;else{if(null!==i&&void 0!==i&&i.aborted||"ECONNABORTED"===i.code||"ERR_CANCELED"===i.code||"canceled"===i.message||"AbortError"===i.name)return void console.log("\ud83d\uded1 Post creation request was aborted");i.message&&(e=i.message)}p.Ay.error(e),console.error("Post creation error:",i)}finally{S(!1)}}else p.Ay.error("Please add some content to your post")};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.mg,{children:[(0,b.jsx)("title",{children:"Create Post - InkWell"}),(0,b.jsx)("meta",{name:"description",content:"Create a new blog post"})]}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Create New Post"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Share your thoughts with the world"})]}),(0,b.jsx)("div",{className:"flex items-center space-x-3",children:(0,b.jsxs)("button",{onClick:()=>P(!E),className:"btn-outline",children:[(0,b.jsx)(d.A,{className:"h-4 w-4 mr-2"}),E?"Edit":"Preview"]})})]}),E?(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:q||"Untitled Post"}),v&&(0,b.jsx)("img",{src:v,alt:"Featured",className:"w-full h-64 object-cover rounded-lg mb-6",loading:"lazy"}),(0,b.jsx)("div",{className:"prose prose-lg max-w-none dark:prose-invert",children:(0,b.jsx)(n.oz,{children:e})})]}):(0,b.jsxs)("form",{onSubmit:I(R),className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title *"}),(0,b.jsx)("input",(0,a.A)((0,a.A)({type:"text"},L("title",{required:"Title is required",maxLength:{value:200,message:"Title cannot exceed 200 characters"}})),{},{className:"input text-2xl font-bold ".concat(z.title?"border-red-500 focus:ring-red-500 focus:border-red-500":""),placeholder:"Enter your post title..."})),z.title&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.title.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),(0,b.jsxs)("select",(0,a.A)((0,a.A)({},L("category",{required:"Category is required"})),{},{className:"input ".concat(z.category?"border-red-500 focus:ring-red-500 focus:border-red-500":""),children:[(0,b.jsx)("option",{value:"",children:"Select a category"}),["Technology","Design","Business","Lifestyle","Travel","Food","Health","Education","Entertainment","Other"].map(e=>(0,b.jsx)("option",{value:e,children:e},e))]})),z.category&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.category.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Featured Image"}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{N(e.target.result)},e.readAsDataURL(t)}},className:"hidden",id:"image-upload"}),(0,b.jsxs)("label",{htmlFor:"image-upload",className:"btn-outline cursor-pointer",children:[(0,b.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Upload Image"]}),v&&(0,b.jsx)("button",{type:"button",onClick:()=>N(""),className:"text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:(0,b.jsx)(m.A,{className:"h-4 w-4"})})]}),v&&(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)("img",{src:v,alt:"Featured",className:"w-32 h-32 object-cover rounded-lg",loading:"lazy"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,b.jsx)("input",{type:"text",value:f,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),D()),placeholder:"Add a tag...",className:"input flex-1"}),(0,b.jsx)("button",{type:"button",onClick:D,className:"btn-outline",children:(0,b.jsx)(x.A,{className:"h-4 w-4"})})]}),s.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:s.map(e=>(0,b.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-primary-100 text-primary-800 dark:bg-primary-900/30 dark:text-primary-400",children:["#",e,(0,b.jsx)("button",{type:"button",onClick:()=>{return t=e,void j(s.filter(e=>e!==t));var t},className:"ml-2 text-primary-600 hover:text-primary-800 dark:text-primary-400 dark:hover:text-primary-300",children:(0,b.jsx)(m.A,{className:"h-3 w-3"})})]},e))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Excerpt"}),(0,b.jsx)("textarea",(0,a.A)((0,a.A)({},L("excerpt",{maxLength:{value:300,message:"Excerpt cannot exceed 300 characters"}})),{},{rows:3,className:"input ".concat(z.excerpt?"border-red-500 focus:ring-red-500 focus:border-red-500":""),placeholder:"Brief description of your post (optional)..."})),z.excerpt&&(0,b.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.excerpt.message})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content *"}),(0,b.jsx)("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg overflow-hidden",children:(0,b.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),rows:15,className:"w-full p-4 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none resize-none font-mono text-sm",placeholder:"# Welcome to InkWell!\n\nStart writing your story in **Markdown** format.\n\n## Features you can use:\n\n- **Bold text** with `**text**`\n- *Italic text* with `*text*`\n- [Links](https://example.com) with `[text](url)`\n- `Inline code` with backticks\n- Lists like this one\n- And much more!\n\nWrite your content here..."})}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:'Use Markdown formatting. Click "Preview" to see how it will look.'})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200 dark:border-gray-700 space-x-4",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{I(e=>R(e,!1))()},disabled:C,className:"btn-outline",children:[(0,b.jsx)(h.A,{className:"h-4 w-4 mr-2"}),C?"Saving...":"Save as Draft"]}),(0,b.jsx)("button",{type:"button",onClick:()=>{I(e=>R(e,!0))()},disabled:C,className:"btn-primary",children:C?(0,b.jsx)(y.A,{size:"sm"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Publish Now"]})})]})]})]})]})}},8693:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(1639).A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])}}]);
//# sourceMappingURL=343.129a5b46.chunk.js.map