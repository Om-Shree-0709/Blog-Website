/*! For license information please see 216.5bdc588f.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkinkwell_frontend=self.webpackChunkinkwell_frontend||[]).push([[216],{5087:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(1639).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8789:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(5043),s=a(5475),o=a(2811),l=a(4918),n=a(2574),i=a(5087),c=a(3528),d=a(5016),m=a(6536),g=a(2339),x=a(579);const u=e=>{var t,a,u,p,h,y,f;let{post:b,featured:v=!1}=e;const{user:k,isAuthenticated:j}=(0,d.A)(),[N,w]=(0,r.useState)(b.likeCount||0),[A,C]=(0,r.useState)(k&&(null===(t=b.likes)||void 0===t?void 0:t.includes(k._id))),[E,_]=(0,r.useState)(k&&(null===(a=k.bookmarks)||void 0===a?void 0:a.includes(b._id)));return(0,x.jsxs)("article",{className:"card overflow-hidden transition-transform hover:scale-[1.02] ".concat(v?"ring-2 ring-primary-200 dark:ring-primary-800":""),children:[b.featuredImage&&(0,x.jsx)("div",{className:"aspect-video overflow-hidden",children:(0,x.jsx)("img",{src:b.featuredImage,alt:b.title,loading:"lazy",className:"w-full h-full object-cover transition-transform hover:scale-105"})}),(0,x.jsxs)("div",{className:"p-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,x.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium text-primary-600 bg-primary-100 dark:bg-primary-900/30 dark:text-primary-400 rounded-full",children:b.category}),v&&(0,x.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium text-amber-600 bg-amber-100 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:"Featured"})]}),(0,x.jsx)(s.N_,{to:"/post/".concat(b.slug),children:(0,x.jsx)("h3",{className:"font-bold text-gray-900 dark:text-white mb-2 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ".concat(v?"text-xl":"text-lg"),children:b.title})}),b.excerpt&&(0,x.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3",children:b.excerpt}),(0,x.jsxs)("div",{className:"flex items-center mb-4",children:[null!==(u=b.author)&&void 0!==u&&u.avatar?(0,x.jsx)("img",{src:b.author.avatar,alt:b.author.username,loading:"lazy",className:"w-8 h-8 rounded-full mr-3"}):(0,x.jsx)("div",{className:"w-8 h-8 bg-primary-600 rounded-full flex items-center justify-center mr-3",children:(0,x.jsx)("span",{className:"text-white font-medium text-sm",children:null===(p=b.author)||void 0===p||null===(h=p.username)||void 0===h?void 0:h.charAt(0).toUpperCase()})}),(0,x.jsxs)("div",{children:[(0,x.jsx)(s.N_,{to:"/profile/".concat(null===(y=b.author)||void 0===y?void 0:y.username),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-primary-600 dark:hover:text-primary-400",children:null===(f=b.author)||void 0===f?void 0:f.username}),(0,x.jsxs)("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[(0,x.jsx)("span",{children:(0,o.A)(new Date(b.createdAt),{addSuffix:!0})}),(0,x.jsx)("span",{className:"mx-1",children:"\u2022"}),(0,x.jsxs)("span",{children:[b.readTime||5," min read"]})]})]})]}),b.tags&&b.tags.length>0&&(0,x.jsxs)("div",{className:"flex flex-wrap gap-1 mb-4",children:[b.tags.slice(0,3).map(e=>(0,x.jsxs)(s.N_,{to:"/search?tag=".concat(e),className:"text-xs text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400",children:["#",e]},e)),b.tags.length>3&&(0,x.jsxs)("span",{className:"text-xs text-gray-400",children:["+",b.tags.length-3," more"]})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-gray-400",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)("button",{onClick:async e=>{if(e.preventDefault(),j){C(e=>!e),w(e=>A?e-1:e+1);try{await m.Ay.post("/api/posts/".concat(b._id,"/like"))}catch(t){C(e=>!e),w(e=>A?e+1:e-1),g.Ay.error("Failed to like post")}}else g.Ay.error("Please login to like posts")},className:"focus:outline-none",children:(0,x.jsx)(l.A,{className:"h-4 w-4 ".concat(A?"text-red-500 fill-current":"")})}),(0,x.jsx)("span",{children:N})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)(n.A,{className:"h-4 w-4"}),(0,x.jsx)("span",{children:b.commentCount||0})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)(i.A,{className:"h-4 w-4"}),(0,x.jsx)("span",{children:b.viewCount||0})]})]}),j&&(0,x.jsx)("button",{onClick:async e=>{if(e.preventDefault(),j){_(e=>!e);try{await m.Ay.post("/api/posts/".concat(b._id,"/bookmark"))}catch(t){_(e=>!e),g.Ay.error("Failed to update bookmark")}}else g.Ay.error("Please login to bookmark posts")},className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ".concat(E?"text-primary-600":"text-gray-400"),title:E?"Remove from bookmarks":"Add to bookmarks",children:(0,x.jsx)(c.A,{className:"h-4 w-4 ".concat(E?"fill-current":"")})})]})]})]})}},9216:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var r=a(5043),s=a(3216),o=a(5475),l=a(9490),n=a(8789),i=a(579);const c=e=>{let{category:t,count:a=0}=e;if(!t||"string"!==typeof t)return console.warn("CategoryCard: Invalid category prop",t),null;return(0,i.jsx)(o.N_,{to:"/search?category=".concat(encodeURIComponent(t)),className:"block p-4 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-primary-300 dark:hover:border-primary-600 transition-all duration-200 hover:shadow-md group",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full mb-3 ".concat((e=>{const t={Technology:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",Design:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",Business:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",Lifestyle:"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400",Travel:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",Food:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",Health:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",Education:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-400",Entertainment:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",Other:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"};return t[e]||t.Other})(t)),children:(0,i.jsx)("span",{className:"text-lg font-bold",children:t.charAt(0)})}),(0,i.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-1 group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors",children:t}),(0,i.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a," ",1===a?"post":"posts"]})]})})};var d=a(5016),m=a(6536);const g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r.useEffect)(()=>()=>{t?(console.log("\ud83e\uddf9 Cancelling all requests"),(0,m.Ks)()):e&&(console.log("\ud83e\uddf9 Cancelling requests matching: ".concat(e)),(0,m.oM)(e))},[e,t])};var x=a(2626),u=a(2339);const p=[{_id:"placeholder1",title:"Data is being prepared...",slug:"data-being-prepared",excerpt:"Please wait a moment while we cache the latest insights and stories for you. Our system is fetching fresh content in the background to ensure a seamless reading experience. Check back shortly \u2014 your personalized articles are on the way.",category:"Loading",author:{username:"system",avatar:""},createdAt:(new Date).toISOString(),readTime:1,tags:["loading","placeholder"],likeCount:0,commentCount:0,viewCount:0},{_id:"placeholder2",title:"Almost there \u2014 preparing top articles",slug:"preparing-top-articles",excerpt:"We are organizing content into segments and optimizing for speed and readability. You\u2019ll soon discover carefully curated articles covering technology, design, innovation, and more. Thank you for your patience as we set up the best experience for you.",category:"Loading",author:{username:"system",avatar:""},createdAt:(new Date).toISOString(),readTime:1,tags:["loading","placeholder"],likeCount:0,commentCount:0,viewCount:0},{_id:"placeholder3",title:"Curating inspiring content for you",slug:"curating-inspiring-content",excerpt:"Great stories take time! Our platform is working behind the scenes to bring you valuable articles that empower and inspire. Please hold on as we complete caching and segmenting your personalized feed.",category:"Loading",author:{username:"system",avatar:""},createdAt:(new Date).toISOString(),readTime:1,tags:["loading","placeholder"],likeCount:0,commentCount:0,viewCount:0},{_id:"placeholder4",title:"Final touches before display",slug:"final-touches-before-display",excerpt:"We\u2019re adding the final touches to your content \u2014 ensuring everything is well-organized and fully optimized. Meanwhile, feel free to explore other parts of our platform or grab a coffee! We appreciate your patience.",category:"Loading",author:{username:"system",avatar:""},createdAt:(new Date).toISOString(),readTime:1,tags:["loading","placeholder"],likeCount:0,commentCount:0,viewCount:0}],h=()=>{const[e,t]=(0,r.useState)(p),[a,h]=(0,r.useState)([]),[y,f]=(0,r.useState)([]),[b,v]=(0,r.useState)(!1),[k,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)({currentPage:1,totalPages:1,hasNextPage:!1,hasPrevPage:!1}),{isAuthenticated:A}=(0,d.A)(),C=(0,s.Zp)();g("/api/posts",!1),g("/api/search",!1);const E=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{v(!0);const a=await m.Ay.get("/api/posts?page=".concat(e,"&limit=6"));t(1===e?a.data.posts:e=>[...e,...a.data.posts]),w(a.data.pagination)}catch(s){var a,r;if(null!==s&&void 0!==s&&s.aborted||"ECONNABORTED"===s.code||"ERR_CANCELED"===s.code||"canceled"===s.message||"AbortError"===s.name)return void console.log("\ud83d\uded1 fetchPosts request was aborted");let e="Failed to load posts. Please try again.";null!==(a=s.response)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&r.message?e=s.response.data.message:s.message&&(e=s.message),u.Ay.error(e),console.error("Error fetching posts:",s)}finally{v(!1)}},[]);(0,r.useEffect)(()=>{(async()=>{try{var e,a,r;const[s,o,l]=await Promise.all([m.Ay.get("/api/posts/preview?limit=4&sort=latest"),m.Ay.get("/api/posts/preview?limit=3&sort=popular"),m.Ay.get("/api/search/categories")]);Array.isArray(null===(e=s.data)||void 0===e?void 0:e.posts)&&t(s.data.posts),Array.isArray(null===(a=o.data)||void 0===a?void 0:a.posts)&&h(o.data.posts),Array.isArray(null===(r=l.data)||void 0===r?void 0:r.categories)&&f(l.data.categories),j(!0);(async()=>{const e=s.data.posts.map(async e=>{try{return(await m.Ay.get("/api/posts/".concat(e.slug))).data.post}catch(t){return null!==t&&void 0!==t&&t.aborted||"ECONNABORTED"===t.code||"ERR_CANCELED"===t.code||"canceled"===t.message||"AbortError"===t.name?(console.log("\ud83d\uded1 Request aborted for ".concat(e.slug)),null):(console.error("Error fetching full data for ".concat(e.slug,":"),t),e)}}),a=o.data.posts.map(async e=>{try{return(await m.Ay.get("/api/posts/".concat(e.slug))).data.post}catch(t){return null!==t&&void 0!==t&&t.aborted||"ECONNABORTED"===t.code||"ERR_CANCELED"===t.code||"canceled"===t.message||"AbortError"===t.name?(console.log("\ud83d\uded1 Request aborted for ".concat(e.slug)),null):(console.error("Error fetching full data for ".concat(e.slug,":"),t),e)}}),[r,l]=await Promise.all([Promise.all(e),Promise.all(a)]),n=r.filter(e=>null!==e),i=l.filter(e=>null!==e);n.length>0&&t(n),i.length>0&&h(i)})()}catch(l){var s,o;if(null!==l&&void 0!==l&&l.aborted||"ECONNABORTED"===l.code||"ERR_CANCELED"===l.code||"canceled"===l.message||"AbortError"===l.name)return void console.log("\ud83d\uded1 Home component requests were aborted");let e="Failed to load posts";null!==(s=l.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.message?e=l.response.data.message:l.message&&(e=l.message),u.Ay.error(e),console.error("Error fetching data:",l)}})()},[]),(0,r.useEffect)(()=>{const e=()=>{E()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}},[E]);const _=()=>{C(A?"/create-post":"/signup")},S=e.length>0||a.length>0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.mg,{children:[(0,i.jsx)("title",{children:"InkWell - Modern Blogging Platform"}),(0,i.jsx)("meta",{name:"description",content:"Discover amazing stories, insights, and ideas from writers around the world."})]}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,i.jsxs)("div",{className:"text-center mb-12",children:[(0,i.jsx)("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 dark:text-white mb-6",children:"Discover Amazing Stories"}),(0,i.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-3xl mx-auto",children:"Explore insights, ideas, and perspectives from writers around the world. Join our community of creators and readers."}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,i.jsx)(o.N_,{to:"/search",className:"btn-primary text-lg px-8 py-3",children:"Explore Posts"}),(0,i.jsx)("button",{onClick:_,className:"btn-outline text-lg px-8 py-3",children:"Start Writing"})]})]}),S?(0,i.jsxs)(i.Fragment,{children:[a.length>0&&(0,i.jsxs)("section",{className:"mb-12",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Featured Stories"}),(0,i.jsx)(o.N_,{to:"/search?sort=popular",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View all \u2192"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,i.jsx)(n.A,{post:e,featured:!0},e._id))})]}),e.length>0&&(0,i.jsxs)("section",{className:"mb-12",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Latest Stories"}),(0,i.jsx)(o.N_,{to:"/search",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium",children:"View all \u2192"})]}),(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:e.map(e=>(0,i.jsx)(n.A,{post:e},e._id))})]}),y.length>0&&(0,i.jsxs)("section",{className:"mb-12",children:[(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Explore Categories"}),(0,i.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:y.map(e=>(0,i.jsx)(c,{category:e.name,count:e.count},e.name))})]}),N.hasNextPage&&(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)("button",{onClick:()=>E(N.currentPage+1),className:"btn-outline",disabled:b,children:b?"Loading...":"Load More Posts"})})]}):(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)(x.A,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,i.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Welcome to InkWell!"}),(0,i.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"This is a fresh start. Be the first to share your story and inspire others."}),(0,i.jsx)("button",{onClick:_,className:"btn-primary text-lg px-8 py-3",children:"Create Your First Post"})]})]})]})}}}]);
//# sourceMappingURL=216.5bdc588f.chunk.js.map